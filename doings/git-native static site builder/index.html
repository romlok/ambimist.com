<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Git-native static site builder | Sigh deeply and carry on</title>
	<link rel="stylesheet" type="text/css" href="/css/style.css" />
</head>
<body>
	<header>
		<h1><a href="/">Sigh deeply and carry on</a></h1>
	</header>

	<nav aria-labelledby="primary">
<a href="/doings">Doings</a>
<a href="/thoughts">Thoughts</a>
	</nav>

	<section id="page-history">
		<a href="history.html">History</a>
		<span class="item created">
			<span class="event">Created</span>
			<time class="time">2023-01-01</time>
		</span>
		<span class="item updated">
			<span class="event">Updated</span>
			<time class="time">2023-06-08</time>
		</span>
	</section>

	<main>
<h2 id="an-unnamed-git-native-static-site-builder">An unnamed git-native
static site builder</h2>
<p>I wanted this website to be just simple static files, so I went
looking for a simple no-frills static site generator. None I found to be
satisfactory. So being a software developer, I of course made my
own.</p>
<h3 id="principles">Principles</h3>
<ul>
<li>Git native</li>
<li>Self contained</li>
<li>Zero install</li>
<li>Zero configuration</li>
</ul>
<h4 id="git-native">Git native</h4>
<p>Two of my peeves about a lot of article-based websites are that: They
fail to mention when an article is published; and they are not
transparent when and what changes are made to published articles.</p>
<p>Since I was inevitably going to be storing my site's content in Git,
and Git tracks this information already, I decided to leverage Git's
repository metadata to help build the site content.</p>
<p>Once that decision had been made, it didn't take long to realise that
one could derive other site information purely from Git metadata.</p>
<p>Thus it was decided:</p>
<ul>
<li>If something can be derived from the content or metadata of the Git
repository, it should be.</li>
<li>If something <em>cannot</em> be derived from the Git repository,
then one should think carefully if it is really that important.</li>
</ul>
<h4 id="self-contained">Self contained</h4>
<p>The tool should live in the repository with the site it built. Thus,
one always knows what version of the tool was used to build the site.
And, in the spirit of software freedom, to distribute the site is to
also distribute its means of production!</p>
<p>For instance, one can see the source of the version used to build
this site at <a href="/engine/build">/engine/build</a>.</p>
<h4 id="zero-install">Zero install</h4>
<p>Building a few static html pages isn't rocket science, I shouldn't
need to download half the internet as dependencies, or install a new
application. Ideally, there should be two requirements for the tool:</p>
<ul>
<li>Git</li>
<li>A posix-compatible <code>/bin/sh</code></li>
</ul>
<p>Although it was found that, as a practical compromise,
<code>pandoc</code> is required to be installed if one wants to build
articles from Markdown sources.</p>
<h4 id="zero-configuration">Zero configuration</h4>
<p>I don't want to have to mess around with config files, when what I
should be doing is writing articles. I should be able to just write my
thoughts to files, and have the site be built sensibly based on the
arrangement of those files in the Git repository.</p>
<h3 id="how-it-works">How it works</h3>
<p>To create a new website, one simply needs to branch from
<code>master</code> and start writing pages and articles in the
repository's <code>src/</code> directory. Once your changes are
<code>git commit</code>ted, running the <code>engine/build</code> script
will build all the HTML files for the site.</p>
<p>The name of the new site, displayed in the site header, will be taken
from the branch name. Or by the name of the nearest <code>git tag</code>
in the branch history when the site is built.</p>
<p>For each file and directory in <code>src/</code>, a directory will be
created in the repository root mirroring the source structure. Each such
directory will contain an <code>index.html</code> for the content of the
page, and a <code>history.html</code> with a summary of the changelog of
the page.</p>
<p>For each file and directory in the <code>src/</code> root itself, an
entry will be added to the site's main navigation.</p>
<p>The exception to this is the file <code>src/footer.html</code> which,
if it exists, is instead used to populate the footer block of every page
of the site.</p>
<p>Each <code>src</code> subdirectory which does not have an explicit
<code>index</code> will have a simple index built. This provides a list
of all the documents and any deeper subdirectories.</p>
<p>Any file whose name starts with <code>DRAFT_</code> will be built,
but not automatically added to any index or navigation.</p>
<p>The generated HTML code is static, and pre-defined by the engine.
Customisation of the site design, therefore, is done entirely through
CSS. This is achieved by creating <code>.css</code> files in a
<code>css</code> directory in the repository root. Any files in this
directory will automatically be <code>link</code>ed in the HTML
<code>head</code> of every page.</p>
	</main>

	<footer>
<a href="https://toot.io/@ambimist">
	<img alt="Mastodon" src="/img/mastodon-black.svg" />
</a>
	</footer>
</body>
</html>
